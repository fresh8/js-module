{"version":3,"file":"module.js","sources":["../src/errors.js","../src/util.js","../src/api/index.js","../src/ad/index.js","../src/cache/index.js","../src/polyfill.js","../src/index.js"],"sourcesContent":["/**\n * Invailde config\n * @param  {String} message is discription you want to add to the error.\n * @return {Error}          a new error with the correct name and message.\n */\nexport function invaildeConfig (message) {\n  const error = new Error(message);\n  error.name = 'invaildeConfig';\n  return error;\n}\n","import { invaildeConfig } from \"./errors\";\n\n/**\n * Returns the window object that this script should inject into\n * @param  {Boolean} shouldBreak is whether or not the script should attempt\n *                               to break from iframe.\n * @return {Window} the working window\n */\nexport function getWindow(shouldBreak) {\n  let workingWindow = window;\n  if (shouldBreak) {\n    try {\n      while (workingWindow !== workingWindow.top) {\n        // The order here is important, as the first line may\n        // throw a security error and break the loop.\n        workingWindow.parent.location.href;\n        workingWindow = workingWindow.parent;\n      }\n    } catch (e) {}\n  }\n  console.log(workingWindow);\n  return workingWindow;\n}\n\n/**\n * Search for <link rel=\"canonical\"> elements or fallback to use the page\n * localtion. If a \"userOverrideRef\" is defined than is returned but URL encoded\n * @param  {Object}  window          is the window object you want to get the\n *                                   canonical link tag from.\n * @param  {Boolean} inApp           is used to control if the page ref should\n *                                   be set to \"about:blank\" as it will cause\n *                                   errors to throw if \"window.localtion\" is\n *                                   accessed in some cases.\n * @param  {String}  userOverrideRef is the over the canonical or window\n *                                   localtion is specified.\n * @return {String}  canonical string or page localtion URL encoded\n */\nexport function getRef(window, inApp, userOverrideRef) {\n  if (\n    userOverrideRef &&\n    typeof userOverrideRef !== \"undefined\" &&\n    userOverrideRef !== \"\"\n  ) {\n    return encodeURIComponent(userOverrideRef);\n  }\n\n  const links = window.document.getElementsByTagName(\"link\");\n  const location = window.location.href;\n\n  let canonical = null;\n  let ref = \"\";\n\n  for (var i = 0; i < links.length; i++) {\n    if (links[i].rel === \"canonical\") {\n      canonical = links[i].href;\n      break;\n    }\n  }\n\n  if (inApp) {\n    ref = \"about:blank\";\n  } else {\n    ref = encodeURIComponent(canonical || location);\n  }\n\n  return ref;\n}\n\n/**\n * Binds the \"__f8\" object and API to the window\n * @param {String} version      is the version to bind the API under\n * @param {Object} targetWindow is window to bind the \"__f8\" object to\n */\nexport function bindf8ToWindow(version, targetWindow) {\n  if (!targetWindow.__f8) {\n    targetWindow.__f8 = {};\n  }\n\n  if (!targetWindow.__f8[version]) {\n    targetWindow.__f8[version] = {};\n  }\n\n  /**\n   * Check if key exists, returns existing value\n   * or replaces it with val\n   * @param  {String}   key        - Key to access value\n   * @param  {Function|Object} val - any value\n   * @return {Object}              - assigned value for key\n   */\n  targetWindow.__f8[version].setUndefinedProperty = function(key, val) {\n    if (targetWindow.__f8[version][key]) {\n      return targetWindow.__f8[version][key];\n    } else if (val) {\n      if (typeof val === \"function\") {\n        targetWindow.__f8[version][key] = val();\n        return targetWindow.__f8[version][key];\n      } else {\n        targetWindow.__f8[version][key] = val;\n        return val;\n      }\n    } else {\n      throw new Error(\n        \"Trying to access f8 v\" +\n          version +\n          \" property \" +\n          key +\n          \", but its not defined\"\n      );\n    }\n  };\n}\n\n/**\n * Injects a script tag onto the page\n * @param  {String} creativeSource is the URL for the script you want to append\n *                                 to the page.\n */\nexport function injectScriptFactory(creativeSource) {\n  console.log(\"here here here\");\n  console.log(creativeSource);\n  var creativeTag = document.createElement(\"script\");\n  creativeTag.type = \"text/javascript\";\n  creativeTag.src = creativeSource;\n  creativeTag.async = \"async\";\n  console.log(creativeTag);\n  document.body.appendChild(creativeTag);\n}\n\n/**\n * Takes a config object and vaildates it\n * @param  {Object} config is the user defined config object\n * @return {Object}        the vaildated object\n */\nexport function vaildateConfig(config = {}) {\n  if (typeof config.instID === \"undefined\" || config.instID === \"\") {\n    throw invaildeConfig('Missing \"instID\" in config');\n  }\n\n  if (typeof config.endpoint === \"undefined\" || config.endpoint === \"\") {\n    config.endpoint = `https://fresh8.co/${config.instID}/raw`;\n  }\n\n  if (typeof config.inApp === \"undefined\") {\n    config.inApp = false;\n  }\n\n  if (typeof config.shouldBreakOut === \"undefined\") {\n    config.shouldBreakOut = false;\n  }\n\n  if (typeof config.listenOnPushState === \"undefined\") {\n    config.listenOnPushState = false;\n  }\n\n  return config;\n}\n","import { getRef } from \"../util\";\nimport { invaildeConfig } from \"../errors\";\n\n/**\n * Makes a request to the ad server API building the URL from the config params\n * passed in.\n * @param  {Object} config is the configurations used to make the API reqeuest\n *                         E.G.\n *                         { slotID: 'f8-001'\n *                         , view: 'home-page' - optional\n *                         , clickTrackingRedirect: 'http://dfp.com?r=' - optional\n *                         , sport: 'football' - optional\n *                         , match: - optional\n *                         , competitorIDs: ['55436'] - optional Opta ID's\n *                         , competitors: ['Manchester United', 'Southampton'] - optinal\n *                         , competitionIDs: ['1245'] - optional Opta ID's\n *                         , competitions: ['Premier League'] - optional\n *                         , window: the window used to extra the page ref from\n *                         , inApp: false - optional\n *                         , endpoint: '' - optional\n *                         , linkSameWindow: true - optional\n *                         , brand: 'my-brand-name' - optional\n *                         , url: 'http://fresh8gaming.com' - optional\n *                         }\n * @return {Promise}\n */\nexport function requestAdData(config) {\n  const vaildatedConfig = vaildateRequestAdConf(config);\n  // Build the end point URL with the slot ID\n  console.log(vaildatedConfig);\n  const endpoint = constructRequestURL(vaildatedConfig.endpoint, {\n    slot: vaildatedConfig.slotID,\n    view: vaildatedConfig.view,\n    clickUrl: vaildatedConfig.clickTrackingRedirect,\n    sport: vaildatedConfig.sport,\n    match: vaildatedConfig.match,\n    competitorIds: vaildatedConfig.competitorIDs,\n    competitors: vaildatedConfig.competitors,\n    competitionIds: vaildatedConfig.competitionIDs,\n    competitions: vaildatedConfig.competitions,\n    linkSameWindow: vaildatedConfig.linkSameWindow,\n    brand: vaildatedConfig.brand,\n    ref: getRef(\n      vaildatedConfig.window,\n      vaildatedConfig.inApp,\n      vaildatedConfig.url\n    )\n  });\n  console.log(endpoint);\n  console.log(\"here 4444\");\n  return fetch(endpoint, { credentials: \"include\" })\n    .then(checkStatusCode)\n    .then(parseJSON);\n}\n\n/**\n * Checks the stats code on a response and rejects the promise chain if\n * less than 200 or greater than 300.\n * @param  {Object} response is the fetch response object\n * @return {(Promise.reject|Object)} a rejected promise or the reponse object\n */\nexport function checkStatusCode(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n\n  return Promise.reject(\"Server returned error: \" + response.status);\n}\n\n/**\n * Returns the json from a fetch request\n * @param  {Object} response is the fetch response object\n * @return {Object} the parsed JSON object\n */\nexport function parseJSON(response) {\n  if (response) {\n    return response.json();\n  }\n}\n\n/**\n * Builds the request URL from the config with the option to add extra\n * key/value.\n * @param  {Object} options is used for adding extra key values to the URL\n *                          as a query strings.\n * @return {String}         The constructed URL\n */\nexport function constructRequestURL(url, options = {}) {\n  const queryStringsOptions = Object.assign({}, options);\n\n  if (typeof queryStringsOptions.competitorIds !== \"undefined\") {\n    queryStringsOptions.competitorIds = queryStringsOptions.competitorIds.map(\n      value => encodeURIComponent(value)\n    );\n  }\n\n  if (typeof queryStringsOptions.competitors !== \"undefined\") {\n    queryStringsOptions.competitors = queryStringsOptions.competitors.map(\n      value => encodeURIComponent(value)\n    );\n  }\n\n  if (typeof queryStringsOptions.competitionIds !== \"undefined\") {\n    queryStringsOptions.competitionIds = queryStringsOptions.competitionIds.map(\n      value => encodeURIComponent(value)\n    );\n  }\n\n  if (typeof queryStringsOptions.competitions !== \"undefined\") {\n    queryStringsOptions.competitions = queryStringsOptions.competitions.map(\n      value => encodeURIComponent(value)\n    );\n  }\n\n  const queryString = buildQueryString(queryStringsOptions);\n  console.log(\"gugugu:\", url + queryString);\n  return url + queryString;\n}\n\n/**\n * Takes a requestAd conf object and vaildates it\n * @param  {Object} config is the user defined config object\n * @return {Object}        the vaildated object\n */\nexport function vaildateRequestAdConf(config = {}) {\n  if (typeof config.endpoint === \"undefined\" || config.endpoint === \"\") {\n    throw invaildeConfig('Missing \"endpoint\"');\n  }\n\n  if (typeof config.slotID === \"undefined\" || config.slotID === \"\") {\n    throw invaildeConfig('Missing \"slotID\"');\n  }\n\n  if (typeof config.window === \"undefined\" || config.window === \"\") {\n    throw invaildeConfig('Missing \"window\"');\n  }\n\n  if (typeof config.inApp === \"undefined\") {\n    config.inApp = false;\n  }\n\n  if (typeof config.shouldBreakOut === \"undefined\") {\n    config.shouldBreakOut = false;\n  }\n\n  if (typeof config.linkSameWindow === \"undefined\") {\n    config.linkSameWindow = false;\n  }\n\n  if (typeof config.competitorIDs === \"undefined\") {\n    config.competitorIDs = [];\n  }\n\n  if (typeof config.competitors === \"undefined\") {\n    config.competitors = [];\n  }\n\n  if (typeof config.competitionIDs === \"undefined\") {\n    config.competitionIDs = [];\n  }\n\n  if (typeof config.competitions === \"undefined\") {\n    config.competitions = [];\n  }\n\n  if (typeof config.listenOnPushState === \"undefined\") {\n    config.listenOnPushState = false;\n  }\n\n  if (\n    (config.competitors.length !== 0 || config.competitions.length !== 0) &&\n    !config.sport\n  ) {\n    throw invaildeConfig(\n      'Sport is required if \"competitions\" or \"competitors\" is passed through in the config'\n    );\n  }\n\n  return config;\n}\n\n/**\n * Takes a dictionary and converts it to a queryString\n * @param  {Object} dictionary is a dictionary of string key's to\n *                             string values.\n * @return {String} a queryString in the form of `?key=val&keyTwo=valTwo`.\n */\nexport function buildQueryString(options) {\n  console.log(\"options\", options);\n  var queryString = \"?\";\n  Object.keys(options).forEach(function(option) {\n    var value = options[option];\n    if (value && value !== \"\" && value.length !== 0) {\n      if (Object.prototype.toString.call(value) === \"[object Array]\") {\n        queryString += option + \"=\" + value.join(\",\") + \"&\";\n      } else {\n        queryString += option + \"=\" + value + \"&\";\n      }\n    }\n  });\n\n  return queryString;\n}\n","import { requestAdData } from \"../api/index\";\nimport { injectScriptFactory } from \"../util\";\nimport { invaildeConfig } from \"../errors\";\n\nexport default class Ad {\n  /**\n   * A class for managing and loading a single ad\n   * @param {Object} config is the configurations used to make the API reqeuest\n   *                        { slotID: 'f8-001'\n   *                        , creativeFactoryCache: new Cache() - used for\n   *                          global cache factory look ups\n   *                       , view: 'home-page' - optional\n   *                       , clickTrackingRedirect: 'http://dfp.com?r=' - optional\n   *                       , sport: 'football' - optional\n   *                       , matchID: '85623' - optional Opta ID\n   *                       , competitorIDs: ['55436'] - optional Opta ID's\n   *                       , competitors: ['Manchester United', 'Southampton'] - optinal\n   *                       , competitionIDs: ['1245'] - optional Opta ID's\n   *                       , competitions: ['Premier League'] - optional\n   *                       , window: the window used to extra the page ref from\n   *                       , inApp: false - optional\n   *                       , endpoint: '' - optional\n   *                       , appendPoint: 'body' - required\n   *                       , linkSameWindow: true - optional\n   *                       , brand: 'my-brand-name' - optional\n   *                       , url: 'http://fresh8gaming.com' - optional\n   *                       }\n   */\n  constructor(config = {}) {\n    // Use to indercate if the ad has been distroyed.\n    this.active = false;\n    // awaitingFactory is used when slecting what ad classes require an creative\n    // factory.\n    this.awaitingFactory = true;\n    // selector is use for selecting the ad in the DOM and is set by the \"load\"\n    // method.\n    this.selector = null;\n    // creativeRef this the creative type. Set by the \"load\" method and updated\n    // by the \"_reload\" method.\n    this.creativeRef = null;\n    // creativePath is the path to the js file needed to load the ad. Set by the\n    // \"load\" method and updated by the \"_reload\" method.\n    this.creativePath = null;\n    // CSSPath is the path to the CSS file needed to load the brand. Set by the\n    // \"load\" method and updated by the \"_reload\" method.\n    this.CSSPath = null;\n    // data is the payload data for the ad factory. Set by the \"load\" method\n    // and updated by the \"_reload\" method.\n    this.data = null;\n    // env is the payload data for the ad factory. Set by the \"load\" method and\n    // updated by the \"_reload\" method.\n    this.env = null;\n    // loadResolvers env data for the ad factory. Set by the \"load\" method and\n    // updated by the \"_reload\" method.\n    this.loadResolvers = null;\n    // adInstance is a refernce to the ad instance loaded by the creative factory.\n    // Set by the \"load\" method and updated by the \"_reload\" method.\n    this.adInstance = null;\n    // config for the ad class.\n    this.config = vaildateConfig(config);\n    // creativeFactoryCache is the global cache for the creative factories.\n    this.creativeFactoryCache = config.creativeFactoryCache;\n    // window is a refernce to the window object used when make API requests.\n    this.window = config.window;\n    // is it an evo product (default to false)\n    this.evo = false;\n  }\n\n  /**\n   * Fetches the data for the ad and loads the ad on the page while updating a\n   * lot the ad's state.\n   * @return {Promise} Resolve when the ad finishes loading and returns an\n   *                   instance of the ad class.\n   */\n  load() {\n    return new Promise((resolve, reject) => {\n      // Construct the object for the request data\n      const requestConfig = {\n        slotID: this.config.slotID,\n        view: this.config.view,\n        clickTrackingRedirect: this.config.clickTrackingRedirect,\n        sport: this.config.sport,\n        match: this.config.match,\n        competitorIDs: this.config.competitorIDs,\n        competitors: this.config.competitors,\n        competitionIDs: this.config.competitionIDs,\n        competitions: this.config.competitions,\n        window: this.config.window,\n        inApp: this.config.inApp,\n        endpoint: this.config.endpoint,\n        appendPoint: this.config.appendPoint,\n        linkSameWindow: this.config.linkSameWindow,\n        url: this.config.url,\n        brand: this.config.brand\n      };\n      console.log(requestConfig);\n      // Make the API request to the ad server\n      requestAdData(requestConfig)\n        .then(payload => {\n          const resolvers = {\n            resolve,\n            reject\n          };\n          // Save the promise so it can be revoled after the creative script\n          // has loaded.\n          this.loadResolvers = resolvers;\n          // if env exists assume it\n          // Inject the scripts for each ad.\n\n          if (!payload.env) {\n            Object.keys(payload).forEach(creativeRef => {\n              this.creativeRef = creativeRef;\n              this.CSSPath = payload[creativeRef].CSSPath;\n              this.data = payload[creativeRef].instances[0].data;\n              this.env = payload[creativeRef].instances[0].env;\n              this.creativePath = payload[creativeRef].creativePath;\n              this.data.appendPoint = this.config.appendPoint;\n            });\n          } else if (payload.env) {\n            this.evo = true;\n            Object.keys(payload.products).forEach(product => {\n              this.creativeRef = payload.products[product].config;\n              this.CSSPath = payload.products[product].skin;\n              // this.CSSPath = `${payload.env.cdn}/${\n              //   payload.products[product].skin\n              // }.json`;\n              this.data = payload.products[product].instances[0];\n              this.env = payload.env;\n              this.creativePath = `${payload.env.cdn}/${\n                payload.products[product].config\n              }.js?v=${payload.env.version}`;\n              this.data.appendPoint = this.config.appendPoint;\n            });\n          }\n\n          // If the ad is adhesion then it wont use the normal append point\n          // container selector.\n          if (this.env.adhesion) {\n            this.selector = \"#f8-adhesion\";\n          } else {\n            this.selector = `${this.config.appendPoint} .f8${this.creativeRef}`;\n          }\n          // Pass the data directly to the ad if we already have it's factory\n          // cached.\n          if (!this.awaitingFactory) {\n            this._callCreativeFactory();\n            // Else just script for the ad factory and pass the data too it once\n            // the loaded event has been emited.\n          } else {\n            // Inject the ad factory script and wait for the load event\n            injectScriptFactory(this.creativePath);\n          }\n        })\n\n        .catch(reason => {\n          this.active = false;\n          reject(reason);\n        });\n    });\n  }\n\n  /**\n   * Reloads first destroys the current ad in place then requests new data\n   * from the ad serving API, if the creative ref exists in the factory cache\n   * then it's loaded. If not a new script is injected into the page and once\n   * loaded will be called by the ad.\n   * @return {Promise} Resolve when the ad finishes loading\n   */\n  reload() {\n    return new Promise((resolve, reject) => {\n      const requestConfig = {\n        slotID: this.config.slotID,\n        view: this.config.view,\n        clickTrackingRedirect: this.config.clickTrackingRedirect,\n        sport: this.config.sport,\n        match: this.config.match,\n        competitorIDs: this.config.competitorIDs,\n        competitors: this.config.competitors,\n        competitionIDs: this.config.competitionIDs,\n        competitions: this.config.competitions,\n        window: this.config.window,\n        inApp: this.config.inApp,\n        endpoint: this.config.endpoint,\n        appendPoint: this.config.appendPoint,\n        linkSameWindow: this.config.linkSameWindow,\n        url: this.config.url,\n        brand: this.config.brand\n      };\n\n      // Request the ad data\n      requestAdData(requestConfig)\n        .then(payload => {\n          // Grab the creative ref from the playload\n          const creativeRef = Object.keys(payload)[0];\n          const resolvers = {\n            resolve,\n            reject\n          };\n\n          // Save the promises incase they need to be resolved by the inject\n          // script.\n          this.loadResolvers = resolvers;\n          // Distroy the current ad in place.\n          this.destroy();\n          // If the creative type has changed then switch the ad type and update\n          // the currently set creative ref/creative path in the class.\n          if (creativeRef !== this.creativeRef) {\n            this.creativeRef = creativeRef;\n            this.creativePath = payload[creativeRef].creativePath;\n            this._switchAdType();\n          }\n\n          // Update the data state.\n          this.data = payload[this.creativeRef].instances[0].data;\n          // Update the env data.\n          this.env = payload[this.creativeRef].instances[0].env;\n          // Update the CSS file path.\n          this.CSSPath = payload[this.creativeRef].CSSPath;\n          // Force the append point in the data to match the one that the class\n          // is using.\n          this.data.appendPoint = this.config.appendPoint;\n          // Update the class selector based on the brand being used\n          this.selector = `${this.config.appendPoint} .f8${this.creativeRef}`;\n          // Finally call the creative factory to create the ad\n          return this._callCreativeFactory();\n        })\n        .catch(reject);\n    });\n  }\n\n  /**\n   * Removes the ad from the DOM and cleans up any brand scripts added.\n   * @return {Promise} Resolves when finished.\n   */\n  destroy() {\n    // Only distroy the ad if it's currently active\n    if (this.active) {\n      const appEl = document.querySelector(this.selector);\n      // Remove the ad and the brand CSS\n      this.adInstance.destroy();\n      appEl.parentNode.removeChild(appEl);\n      this.active = false;\n    }\n  }\n\n  /**\n   * Swtich ad type changes get the ad factory for the new creative if it exists\n   * in the cache, otherwise it will inject a new script for it and wait for it\n   * load.\n   */\n  _switchAdType() {\n    if (this.creativeFactoryCache.exists(this.creativeRef)) {\n      this._setCreativeFactory(this.creativeFactoryCache.get(this.creativeRef));\n    } else {\n      this.awaitingFactory = true;\n      injectScriptFactory(this.creativePath);\n    }\n  }\n\n  /**\n   * Takes a creative factory and sets it as the current one in the class and\n   * also sets the state to not be waiting for a creative factory.\n   * @param {Function} creativeFactory is the creative factory you want to set.\n   */\n  _setCreativeFactory(creativeFactory) {\n    console.log(\"here ierwoiewhr\");\n    this.awaitingFactory = false;\n    this.creativeFactory = creativeFactory;\n  }\n\n  /**\n   * Calls the currently set creative factory if it's not waiting for one.\n   * @return {Promise} Resolves after the creative has been loaded on to the\n   * page.\n   */\n  _callCreativeFactory() {\n    if (!this.awaitingFactory) {\n      return this.creativeFactory(\n        this.env,\n        this.data,\n        this.CSSPath,\n        this.window\n      )\n        .then(adInstance => {\n          this.adInstance = adInstance;\n          this.active = true;\n          this.loadResolvers.resolve(this);\n        })\n        .catch(this.loadResolvers.reject);\n    }\n\n    return Promise.resolve();\n  }\n}\n\n/**\n * Vaildates the config for the ad class.\n * @param  {Object} config is the configurations you want to vaildate.\n * @return {Object}        the vaildated config.\n */\nexport function vaildateConfig(config = {}) {\n  if (typeof config.endpoint === \"undefined\" || config.endpoint === \"\") {\n    throw invaildeConfig('Missing \"endpoint\"');\n  }\n\n  if (\n    typeof config.creativeFactoryCache === \"undefined\" ||\n    config.creativeFactoryCache === \"\"\n  ) {\n    throw invaildeConfig('Missing \"creativeFactoryCache\"');\n  }\n\n  if (typeof config.slotID === \"undefined\" || config.slotID === \"\") {\n    throw invaildeConfig('Missing \"slotID\"');\n  }\n\n  if (typeof config.appendPoint === \"undefined\" || config.appendPoint === \"\") {\n    throw invaildeConfig('Missing \"appendPoint\"');\n  }\n\n  if (typeof config.window === \"undefined\" || config.window === \"\") {\n    throw invaildeConfig('Missing \"window\"');\n  }\n\n  if (typeof config.inApp === \"undefined\") {\n    config.inApp = false;\n  }\n\n  if (typeof config.shouldBreakOut === \"undefined\") {\n    config.shouldBreakOut = false;\n  }\n\n  if (typeof config.linkSameWindow === \"undefined\") {\n    config.linkSameWindow = false;\n  }\n\n  if (typeof config.competitorIDs === \"undefined\") {\n    config.competitorIDs = [];\n  }\n\n  if (typeof config.competitors === \"undefined\") {\n    config.competitors = [];\n  }\n\n  if (typeof config.competitionIDs === \"undefined\") {\n    config.competitionIDs = [];\n  }\n\n  if (typeof config.competitions === \"undefined\") {\n    config.competitions = [];\n  }\n\n  if (typeof config.listenOnPushState === \"undefined\") {\n    config.listenOnPushState = false;\n  }\n\n  if (\n    (config.competitors.length !== 0 || config.competitions.length !== 0) &&\n    !config.sport\n  ) {\n    throw invaildeConfig(\n      'Sport is required if \"competitions\" or \"competitors\" is passed through in the config'\n    );\n  }\n\n  return config;\n}\n","export default class Cache {\n  /**\n   * A basic cache store class\n   */\n  constructor () {\n    this.cache = {};\n  }\n\n /**\n  * Set a value against a key in the store.\n  * @param  {String} key   is the name that you want to store the data under.\n  * @param  {*}      value is the data to you want to store.\n  */\n  put (key, value) {\n    this.cache[key] = value;\n  }\n\n  /**\n   * Remove a key/value pair from the store.\n   * @param {String} key is the name of the key you want to remove.\n   */\n  remove (key) {\n    if (this.cache[key]) {\n      delete this.cache[key];\n    }\n  }\n\n  /**\n   * Retrieve a value from the store using a key.\n   * @param  {String} key is the key you want to use to select cache value in\n   *                      the store.\n   * @return {*}          A cached value from the store if it exists.\n   */\n  get (key) {\n    return this.cache[key];\n  }\n\n  /**\n   * Checks if a value exists in the store.\n   * @param  {String} key is the key you want to use to check a value exists for.\n   * @return {Boolean}    whether the value exists or not.\n   */\n  exists (key) {\n    if (this.cache[key]) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n","/**\n * Adds customEvent method to the window if it doesn't already exist.\n */\nexport function customEvent () {\n  if (typeof window.CustomEvent === 'function') {\n    return false;\n  }\n\n  function CustomEvent (event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n\n  window.CustomEvent = CustomEvent;\n}\n\n/**\n * Monkey patches the pushState function to emit a custome event\n * \"__f8-history-push-state\" on call.\n * @return {Object} Factories to apply and revert the polyfill changes\n */\nexport function PolyfillHistoryPushState () {\n  const _historyPushState = window.history.pushState;\n  const historyPushStateEvent = new CustomEvent('__f8-history-push-state');\n\n  /**\n   * Restores the original \"window.history.pushState\" method\n   */\n  function restore () {\n    window.history.pushState = _historyPushState;\n  }\n\n  /**\n   * Applies the event dispatcher to the \"history.pushState\" method\n   */\n  function fill () {\n    history.pushState = addEventDispatch;\n  }\n\n  /**\n   * A polyfilled version of the history.pushState\" method with the\n   * \"__f8-history-push-state\" dispatched on call.\n   */\n  function addEventDispatch () {\n    const historyPushState = _historyPushState.apply(this, arguments);\n    window.dispatchEvent(historyPushStateEvent);\n    return historyPushState;\n  }\n\n  return {\n    restore,\n    fill\n  };\n}\n","// import \"whatwg-fetch\";\nimport Ad from \"./ad/index\";\nimport Cache from \"./cache/index\";\n\nimport { customEvent, PolyfillHistoryPushState } from \"./polyfill\";\n\nimport { getWindow, bindf8ToWindow, vaildateConfig } from \"./util\";\n\nconst version = \"1.0.0\";\n\nexport default class Fresh8 {\n  /**\n   * Fresh8 is a class that handles the injection of Fresh8 ads into a target\n   * based on slot ID.\n   * @param {Object} config is the global instance configurations E.G.\n   *                        { instID: '54ad56a213fe19232b646047'\n   *                        , shouldBreakOut: false  - optinal\n   *                        , listenOnPushState: false - optinal\n   *                        , inApp: false - optional\n   *                        , endpoint: '' - optional\n   *                        }\n   *                        For more details on these options please refer to\n   *                        the readme.\n   */\n  constructor(config) {\n    // Ad class\n    this.Ad = Ad;\n    // Adds polyfills for custome events.\n    customEvent();\n    // The vaildated user config.\n    this.config = vaildateConfig(config);\n    // The window that should be used to append the ad to.\n    this.window = getWindow(this.config.shouldBreakOut);\n    // A store for the currently loaded ads.\n    this.ads = [];\n    // Cache for the creative factories.\n    this.creativeFactoryCache = new Cache();\n    // Bind the \"__f8\" object to the current window. This is rquired by our ad\n    // factories.\n    bindf8ToWindow(version, this.window);\n    // Bind the global event listener that's fired when the ad factory is loaded.\n    this._addEventLisnters();\n    // Bind a custome event for push state changes.\n    if (this.config.listenOnPushState) {\n      this.polyfillHistoryPushState = new PolyfillHistoryPushState();\n      this.polyfillHistoryPushState.fill();\n    }\n  }\n\n  /**\n   * Request an ad by slot ID, this ad will be appended to the \"appendPoint\"\n   * @param  {Object} config defines want data you want to pass to the Fresh8\n   *                         ad system when injecting your ad. E.G.\n   *                         { slotID: 'f8-001' - required\n   *                         , url: 'http://fresh8gaming.com'\n   *                         , appendPoint: 'body' - required\n   *                         , view: 'home-page' - optional\n   *                         , clickTrackingRedirect: 'http://dfp.com?r='  - optional\n   *                         , sport: 'football' - optional\n   *                         , matchID: '85623' - optional Opta ID\n   *                         , competitorIDs: ['55436'] - optional Opta ID's\n   *                         , competitors: ['Manchester United', 'Southampton'] - optinal\n   *                         , competitionIDs: ['1245'] - optional Opta ID's\n   *                         , competitions: ['Premier League'] - optional\n   *                         , brand: 'my-brand-name' - optional\n   *                         }\n   *                         For more details on these options please refer to\n   *                         the readme.\n   * @return {Promise}       This is resolved or rejected based on if the ad\n   *                         loaded successfully or not.\n   */\n  requestAd(config = {}) {\n    return new Promise(resolve => {\n      // Add Fresh8 class data to request ad config\n      config.endpoint = this.config.endpoint;\n      config.window = this.window;\n      config.creativeFactoryCache = this.creativeFactoryCache;\n      // Create a new ad and\n      console.log(\"config in request ad\", config);\n      const ad = new this.Ad(config);\n\n      // Store the ad for reference\n      this.ads.push(ad);\n      // Load the ad a return the promise\n      return resolve(ad.load());\n    });\n  }\n\n  /**\n   * Cleans up any event lisnters/ads added by the class\n   */\n  remove() {\n    // Remove any added event lisnters\n    this._removeEventLisnters();\n    // Remove all the ads from the page\n    this.destroyAllAds();\n    // Restore the patch history push state\n    if (this.config.listenOnPushState) {\n      this.polyfillHistoryPushState.restore();\n    }\n  }\n\n  /**\n   * Reloads all the currently active ads on the page\n   * @return {Promise} containing references to the new ads\n   */\n  reloadAllAds() {\n    const activeAds = this.ads.filter(ad => ad.active);\n    return Promise.all(activeAds.map(ad => ad.reload()));\n  }\n\n  /**\n   * Destroys all currently active ads on the page\n   * @return {Promise} resolves on completion\n   */\n  destroyAllAds() {\n    const activeAds = this.ads.filter(ad => ad.active);\n    return Promise.all(activeAds.map(ad => ad.destroy()));\n  }\n\n  /**\n   * Adds the \"__f8-creative-script-loaded\" and \"__f8-history-push-state\" event\n   * lisnters to the window\n   */\n  _addEventLisnters() {\n    console.log(\"add event listeners\");\n    this.boundOnCreativeLoaded = this._onCreativeLoaded.bind(this);\n    this.boundOnHistoryPushStateChange = this._onHistoryPushStateChange.bind(\n      this\n    );\n    this.window.addEventListener(\n      \"__f8-creative-script-loaded\",\n      this.boundOnCreativeLoaded\n    );\n    this.window.addEventListener(\n      \"__f8-product-script-loaded\",\n      this.boundOnCreativeLoaded\n    );\n    this.window.addEventListener(\n      \"__f8-history-push-state\",\n      this.boundOnHistoryPushStateChange\n    );\n  }\n\n  /**\n   * Removes the \"__f8-creative-script-loaded\" and \"__f8-history-push-state\" event\n   * lisnters from the window\n   */\n  _removeEventLisnters() {\n    this.window.removeEventListener(\n      \"__f8-creative-script-loaded\",\n      this.boundOnCreativeLoaded\n    );\n    this.window.removeEventListener(\n      \"__f8-product-script-loaded\",\n      this.boundOnCreativeLoaded\n    );\n    this.window.removeEventListener(\n      \"__f8-history-push-state\",\n      this.boundOnHistoryPushStateChange\n    );\n  }\n\n  /**\n   * Handler for the script loaded event and set the creative factory on any\n   * ads that match the creative ref and are waiting for a creativeFactory.\n   * @param {Object} event is a custom event object\n   */\n  _onCreativeLoaded(event) {\n    // Cache the creative factory so we can re used it for other ads\n    this.creativeFactoryCache.put(event.creativeRef, event.creativeFactory);\n    console.log(\"this in creative loaded\", this);\n    // Loop over the ads and check if any that require a creative factory\n    // with the matching creative ref\n    this.ads.forEach(ad => {\n      if (ad.evo) {\n        if (ad.awaitingFactory && event.config === ad.creativeRef) {\n          // Set the creative factory\n          ad._setCreativeFactory(event.productFactory);\n          // Call the creative factory loading the ad onto the page\n          ad._callCreativeFactory();\n        }\n      } else {\n        if (ad.awaitingFactory && event.creativeRef === ad.creativeRef) {\n          // Set the creative factory\n          ad._setCreativeFactory(event.creativeFactory);\n          // Call the creative factory loading the ad onto the page\n          ad._callCreativeFactory();\n        }\n      }\n    });\n  }\n\n  /**\n   * Handels the push state change event that reloads all the currently active\n   * ads on the page\n   */\n  _onHistoryPushStateChange() {\n    this.reloadAllAds().catch();\n  }\n}\n"],"names":["const","let","vaildateConfig","this"],"mappings":"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"}